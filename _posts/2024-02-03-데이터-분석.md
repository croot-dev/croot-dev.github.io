---
layout: post
title: "데이터 분석"
created: 2024-02-03
edited: 2024-02-12
category: [기술]
tags: [ADsP,자격증]
---


전처리: 데이터 정제(결측치, 이상치 제거) , 분석 변수처리(변수선택, 차원축소, 클래스 불균형)


R 패키지


reshape: 데이터마트 개발 (melt, cast)


sqldf: SQL 이용하여 Dataframe 제어


plyr: apply 함수기반 데이터분리 및 결합 처리 기능


data.table: 컬럼 별 인덱스 생성


탐색적 데이터분석 (EDA)


정의


데이터를 이해하고 의미있는 관계를 찾아내기 위해 데이터의 분포,통계 등을 시각화하고 분석하는 기법


결측치 처리: 단순 대치(삭제), 평균 대치, 단순확률 대치(K-NN), 다중 대치(대치, 분석, 결합)


이상값 판단: ESD(표준편차 3), 사분위수


**통계 분석**


정의


특정집단을 대상으로 자료를 수집하여 정보를 구하고, 적절한 통계분석을 이용하여 의사결정을 하는 과정


표본추출 방식


단순랜덤


계통 추출법: K=N/n


Cluster 추출법: Cluster 내 이질적 Data


층화 추출법: cluster 내 동질적 Data, 비례(분포반영), 불비례(분포미반영)


복원추출: 모집단 복원


비복원추출: 추출 데이터 제외


측정: 관측하여 자료를 얻음


척도: 관측 대상의 속성을 수치화하는 일정 규칙


척도 분류


질적 척도: 명목 척도, 순서(서열) 척도


양적 척도: 구간(등간)척도, 비율 척도


기술통계: 표본의 특징, 속성 파악 → 요약, 조직화, 단순화


추리통계: 모집단 특정 추정, 가설 검증 → 사건 예측


편차: 데이터와 평균과의 차이


분산: 각 편차의 제곱을 더한 후 데이터 갯수로 나눔.


표준 편차: 분산에 루트를 씌움.


확률:


조건부확률:


독립사건: 서로에게 영향이 없는 두 사건


배반사건: 두 사건이 공통된 부분이 없는 사건


확률변수: 특정확률로 발생하는 각 변수를 수치값으로 표현하는 변수

- 연속확률변수: 구간 내 모든 값을 취하는 확률변수
- 이산확률변수: 셀 수 있는 확률변수

확률분포

- 이산확률분포
	- 베르누이 분포
	- 이항 분포
		- n번의 베르누이 시행 결과의 분포
	- 기하 분포
		- 베르누이 시행에서 처음 성공하기까지의 횟수 분포
	- 다항 분포:
		- 3가지 이상의 결과가 n번의 베르누이 시행의 결과 분포
	- 포아송 분포:
		- 특정 시간/공간 안에 성공 할 확률의 갯수 분포
	- 이산확률변수
- 연속확률분포
	- 균일 분포
		- 모든 독립변수가 동일한 확률을 가지는 분포
	- 정규 분포
		- 분산과
	- t-분포
	- 카이제곱 분포
	- F 분포
	- 연속확률 변수

> 💡 SSE(residual sum of squares, sum squared errors): 잔차들이 자신의 표본평균으로부터 벗어난 편차의 제곱  
> SSR(explained sum of squares, sum squared regression): 표본평균과 종속변수값 중 독립변수에 의해 설명된 부분과의 차이를 제곱하여 합한 값  
>   
> SST(total sum of squares): 종속변수의 관측값과 표본의 평균의 차이를 제곱하여 합한 값 (SSR+SSE)


	SSR(explained sum of squares, sum squared regression): 표본평균과 종속변수값 중 독립변수에 의해 설명된 부분과의 차이를 제곱하여 합한 값


	SST(total sum of squares): 종속변수의 관측값과 표본의 평균의 차이를 제곱하여 합한 값 (SSR+SSE)


추정


점 추정: 모평균을 하나의 특정 값이라고 예측하는 것


구간 추정: 모평균을 특정 구간 안에 존재한다고 예측하는 것


가설검정


개념


귀무가설: 기각하고자 하는 가설(H0)


대립가설: 증명하고자 하는 가설


제1종오류: 귀무가설이 참인데 기각하는 오류


제2종오류: 귀무가설이 거짓인데 기각하지 않는 오류


검정통계량: 표본 조사 시에 특정 수식에 의하여 표본으로부터 얻어지는 값 (귀무가설 판단 값)


기각역: 귀무가설을 기각하게될 검정통계량의 영역


유의수준: 제1종오류의 최대허용한계(보통 0.05)


유의확률(p-value): 귀무가설 지지 확률


모수검정: 표본이 정규성을 가진다는 모수적 특성을 이용하는 통계 방식


비모수 검정: 모수적 특성을 이용하지 않은 통계 방식


t-test


단일표본: 하나의 모집단 평균값과 특정 값과 비교하는 경우

- 단일 표본 단측: 모수값이 한쪽으로만 방향성을 갖는 경우 (~ 보다 크다, 작다)
- 단일 표본 양측: 방향성이 없는 경우 (~이다, 아니다)

독립표본: 서로독립적인 두 집단이 모수값이 같은지 검정하는 경우

- 독립 표본 단측: 두 집단이 대소가 있는 경우(~이 ~보다 크다, 작다)
- 독립 표본 양측: 두 집단 사이에 대소가 없는 경우 (두 집단이 같다, 다르다)

대응표본(paired): 동일 대상에 대해 두가지 관측치 를 비교하는 경우


ANOVA(분산분석): 세 개 이상의 모집단 평균을 비교


가정사항: 정규성, 등분산성, 독립성

- one-way: 독립변수와 종속변수 모두 한 개인 경우
- two way: 독립변수가 2개 이상인 경우
	- 교호작용 여부에 따라 반복실험

교차분석: 범주형 자료 간 관계 파악 (카이제곱 이용)

- 적합도 검정: 관측값과 예상값 일치 여부
- 독립성 검정: 두 변수 간 관계가 독립적인지 판단
- 동질성 검정: 정해진 범주 내에서 관측값이 비슷한지 여부

상관분석: 변수 간 선형 관계

- 귀무가설= 두 변수는 아무 관계 없다.
- 피어슨(선형): 모수적 방법으로 등간척도, 비율척도 시 사용
- 스피어만(비선형): 비모수적 방법으로 서열척도 시 사용

**회귀분석**


정의


하나 이상의 독립변수가 종속변수에게 미치는 영향을 추정하는 기법.


유형


단순회귀: 1개의 독립변수, 직선 관계


다중최귀: k개의 독립변수, 선형 관계


다항회귀: 4개의 독립변수, 2차함수 이상 관계


비선형회귀: 지수함수, 로그함수, 삼각함수 등


전제조건


선형성, 독립성, 등분산성, 정규성


단순선형회귀분석


추정: 최소제곱법


적합성 검증: 분산분석표


모형의 유의성 검증: F 검정


회귀계수 유의성 검증: t-검정


모형 설명력 검증: 분산분석 후 결정계수


다중선형회귀분석


다중공선성: 독립변수 간 강한 상관관계

- 진단
	- 회귀식의 설명력 높지만 각 독립변수 p-value 큰 경우
	- 분산팽창요인(VIF)가 10 이상 인 경우
- 해결
	- 문제변수 제거
	- 차원축소(PCA, LDA, t-SNE, SVD)
	- 주성분개수 선택 (scree plot 이용)

최적 회귀방정식


정의:


모델 성능향상을 위해 종속변수에 유의미한 영향을 끼치는 독립변수를 선택하는 과정


변수 선택법

- 작동원리 분류: 임베디드, Wrapper, Filter
- 유형
	- 부분집합법: 모든 가능한 모델 고려
	- 단계적 변수선택법: 일정 단계 거쳐서 도출
		- 전진선택법, 후진제거법, 단계별방법
	- 성능지표
		- AIC, BIC
		- 멜로우 Cp

고급회귀분석


정규화 회귀분석

- overfitting, underfitting
- 정규화 선형회귀
	- Lasso (L1규제)
	- Lidge (L2규제)
	- Elastic Net

일반화 선형회귀


구성: 확률요소, 선형예측자, 연결함수


유형: 로지스틱, 포아송


더빗 왓슨 검정


평가지표


![0](/assets/img/2024-02-03-데이터-분석.md/0.png)_Untitled.png_


다변량 분석


다차원 척도법


측도: stress 척도(0~0.05=적합도 좋음, 0.15~1=적합도 나쁨)


종류


| 계량적 MDS   | 비계량적 MDS   |
| --------- | ---------- |
| 구간척도,비율척도 | 서열척도       |
| 유클라디안     | 서열 → 거리 속성 |
| Cmdscale  | isoMDS     |


주성분분석


변수를 축소하여 모델 설명력을 높임.


분산이 큰 축을 이용하기 때문에 다중공선성 문제 해결


분석방식: 계량적MDS, screeplot, biplot


시계열분석


정의


일정 시간 간격으로 기록된 자료들의 특성을 파악하여 미래를 예측하는 분석방법


시계열자료

- 유형: 정상성, 비정상성
- 정상성 조건:
- 일정한 평균 (차분 이용)
- 일정한 분산 (변환이용)
- 시차에만 의존하는 공분산
- 차분: 현시점 자료값에서 이전시점 자료 값을 빼는것

분석기법


이동평균법, 지수평활법(이동평균법 + 가중치)


모형


자기회귀(AR): 이전시점 자료 선형 결합


이동평균(MA): 이전시점 백색잡음 선형 결합


자기회귀누적이동 평균(ARIMA): 비정상 시계열 자료 모형.


분해 시계열: 특정요인 분리, 제거 분석 (추세, 계절, 순환, 불규칙 요인)


**정형데이터 마이닝**


**데이터 마이닝**


정의


방대한 양의 데이터 속에 숨겨진 패턴, 규칙 등을 찾아 예측, 의사결정 지원에 활용하는 기술

- 통계분석과 차이점
- 표본이 필요하지 않음.
- 가설, 검정이 필수적이지 않음.
- 데이터마이닝(상향식), 통계분석(하향식)

방식 분류

- 지도학습
	- 회귀(연속형): Linear regression, 의사결정트리, SVR, 신경망, Ridge, Lasso
	- 분류(범주형): Logistic Regression, 의사결정트리, K-NN, 앙상블, SVM, 나이브 베이즈 분류
- 비지도학습
	- 군집, 연관: k-means, SOM, DBSCAN, Apriori
	- 차원축소: PCA, LDA, SVD, MDS

목적 분류

- 분류
- 군집
- 연관

프로세스


목적정의 → 데이터준비 → 데이터가공 → 데이터마이닝 기법적용 → 검증


데이터 분할


훈련(5):검증(3):평가(2)


훈련(6):검증(2):평가(2)


검증


Holdout: 전체데이터 → 학습(80), 검증(20)


K-fold cross: k개 집단, 과적합(과소적합)예방


LOOCV:.


Bootstrap: 복원추출


계층별 k-fold cross


**분류분석**


로지스틱 회귀 분석

- 변수: 2개집단 = 기본, 3개 이상 = 다중 로지스틱
- 알고리즘: Odds, logit 변환, 시그모이드

의사결정나무

- 특징 : 집단 내 동질성↑, 집단 간 이질성↑
- 구성요소: root node, mid node, leaf node, depth, branch
- 활용: 세분화, 분류, 예측, 차원축소, 교호작용
- 장점: 직관적, 정규화 불필요, 이상값
- 단점: 과적합 발생, 경계선 오차
- 분석과정: 성장(분리기준, 정리규칙) → 가지치기 → 타당성평가 → 해석 및 예측
- 분리기준:
	- 이산형 : 카이제곱(CHAID), 지니지수(CART),엔트로피 지수 (C4.5)
	- 연속형: ANOVA-F 통계량(CHAID), 분산감소량(CART)

앙상블

- 종류:
	- 배깅: 복원추출(부트스트랩) → 분류기 → voting
	- 부스팅: 복원추출(부트스트랩) → weight 적용추출(부트스트랩)
	- 랜덤포레스트: 복원추출(부트스트랩) → 비복원추출(표본) → 분류기 → voting

인공신경망

- 유형: 단층, 다층
- 활성함수: step, sign, sigmoid, tanh, RELU, softmax
- 알고리즘: 순방향, 역전파
- 구조유형: RNN, CNN, LSTM, GRU, YOLO, GAN

나이브베이즈

- 베이즈 이론: 사전확률과 우도확률을 통해 사후확률을 추정
- 활용: 스팸메일 필터링, 텍스트분류

K-NN


SVM

- 구성: hyper plane, margin

성과평가

- 혼동행렬(오분류표): 정확도, 오분류율, 민감도(재현율), 특이도, 정밀도, F1-Score, FRR
- ROC curve: FRR-TPR 그래프, AUROC
- 이익도표(Lift chart)
- 향상도 곡선(Lift curve)

**군집분석**


거리측도

- 연속형: 유클리디안, 맨하튼, 체비셰프, 표준화, 마할라노비스, 민코프스키
- 범주형: 단순일치계수, 자카드 거리, 코사인 유사도, 순위상관계수

계층적 군집분석

- 유형: 병합적, 분할적
- 거리측정: 단일연결, 완전연결, 평균연결, 중심연결, 와드연결

비계층적 군집분석

- K-means: K개의 seed 설정 → 데이터 seed 할당 → 중앙값계산 → seed 재설정 → 군집 재할당
- DBSCAN

혼합분포 군집

- 개념: 확률분포에서 추출된 데이터끼리 군집화
- EM 알고리즘: 파라미터(모수) 설정 → Z기대값계산 → 새로운 파라미터 추정 → 반복 및 종료
- 자기조직화지도(SOM)
	- 구성: 입력층, 경쟁층, fully connected, BMU, 승자노드.
	- 과정:
	- 장점: 순전파만 이용 빠름, 시각적 이해용이, 데이터 속성 보존
	- 단점: 초기 설정 영향도 높음, 경쟁층 노드 수 선정 어려움

평가

- 외부평가: 자카드 계수평가, 혼동행렬, ROC curve
- 내부평가: 단순계산법, 거리 측도 이용, 실루엣 계수, 엘보 메소드

**연관분석**


측도: 지지도, 신뢰도, 향상도


알고리즘

- apriori: 지지도 이용 계산 복잡도 감소
- FP-Growth: 지지도 이용 상향식 알고리즘

특징

- 장점: 계산 및 결과 단순
- 세분화 어려움, 초기 데이터 필요
- 순차패턴: 연관분석 + 시간
